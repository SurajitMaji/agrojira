{% extends 'ongoingProjectBase.html'%}

{% load static %}
{% block title%}
{{project.crop_name}} Project
{% endblock title%}
  
  
{% block head %}

<link rel="stylesheet" type="text/css" href="{% static 'css/completedProject.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/ongoingProjectSoil.css' %}">
{% endblock head %}
{% block projectDetailsBody %}


<div class="project-datails-container">
  
  {% if not soils  %}
  
  <div class="each-soil-form">
    <div class="header">Soil Details Form</div>
    <form method="POST" action="/submit_farmerSoil" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="section">      
      <div class="label">Soil Type:</div>
      <div class="value">
        <input type="text" name="soil_type" required>
      </div>
    </div>
    <div class="section foreign_key">      
      <div class="label">Project Id:</div>
      <div class="value">
        <input type="number" name="project_id" readonly value="{{project.project_id}}">
      </div>
    </div>
    <div class="section">
      <div class="label">pH Level:</div>
      <div class="value">
        <input type="number" name="ph_level" required>
      </div>
    </div>

    <div class="section">
      <div class="label">Nitrogen:</div>
      <div class="value">
        <input type="number" name="nitrogen" required>
      </div>
    </div>

    <div class="section">
      <div class="label">Phosphorus:</div>
      <div class="value">
        <input type="number" name="phosphorus" required>
      </div>
    </div>

    <div class="section">
      <div class="label">Potassium:</div>
      <div class="value">
        <input type="number" name="potassium" required>
      </div>
    </div>

    <div class="section">
      <div class="label">Organic Matter:</div>
      <div class="value">
        <input type="number" name="organic_matter">
      </div>
    </div>

    <div class="section">
      <div class="label">Tempratute:</div>
      <div class="value">
        <input type="number" name="temparature" required>
      </div>
    </div>

    <div class="section">
      <div class="label">Humidity:</div>
      <div class="value">
        <input type="number" name="humidity" required>
      </div>
    </div>

    <div class="section">
      <div class="label">Amendments:</div>
      <div class="value">
        <textarea type="number" name="amendments"></textarea>
      </div>
    </div>

    <div class="section">
      <div class="label">Tools Used:</div>
      <div class="value">
        <textarea type="number" name="tools_used"></textarea>
      </div>
    </div>



    <div class="section">
      <div class="label">Soil Image:</div>
      <div class="value">
        <input type="file" name="soil_image" required onchange="preview(this,'photo_preview')" >
        <img alt="Soil Image" id="photo_preview">
      </div>
    </div>

    <div class="buttons">
      <button type="submit" class="edit-btn" >Submit</button>
    </div>
    </form>
  </div>
  
  {% else %}
  {% for soil in soils %}
  <div class="each-soil-recorder">
    <div class="header">Soil Report No: {{foorloop.counter}}</div>
    <div class="section">
      <div class="label">Soil Type:</div>
      <div class="value">{{soil.soil_type}}</div>
    </div>

    <div class="section">
      <div class="label">pH Level:</div>
      <div class="value">{{soil.ph_level}}</div>
    </div>

    <div class="section">
      <div class="label">Nitrogen:</div>
      <div class="value">{{soil.nitrogen}}</div>
    </div>

    <div class="section">
      <div class="label">Phosphorus:</div>
      <div class="value">{{soil.phosphorus}}</div>
    </div>

    <div class="section">
      <div class="label">Potassium:</div>
      <div class="value">{{soil.potassium}}</div>
    </div>

    <div class="section">
      <div class="label">Organic Matter:</div>
      <div class="value">{{soil.organic_matter}}</div>
    </div>

    <div class="section">
      <div class="label">Tempratute:</div>
      <div class="value">{{soil.temparature}}</div>
    </div>

    <div class="section">
      <div class="label">Humidity:</div>
      <div class="value">{{soil.humidity}}</div>
    </div>

    <div class="section">
      <div class="label">Amendments:</div>
      <div class="value">{{soil.amendments}}</div>
    </div>

    <div class="section">
      <div class="label">Tools Used:</div>
      <div class="value">{{soil.tools_used}}</div>
    </div>

    <div class="section">
      <div class="label">Is Completed:</div>
      <div class="value">{{soil.is_completed}}</div>
    </div>

    <div class="section">
      <div class="label">Created At:</div>
      <div class="value">{{soil.created_at}}</div>
    </div>

    <div class="section">
      <div class="label">Updated At:</div>
      <div class="value">{{soil.updated_at}}</div>
    </div>

    <div class="section">
      <div class="label">Expert Advice:</div>
      <div class="value">{{soil.expert_advice}}</div>
    </div>

    <div class="section">
      <div class="label">ML Prediction:</div>
      <div class="value">{{soil.ml_prediction}}</div>
    </div>

    <div class="section">
      <div class="label">ML Confidence:</div>
      <div class="value">{{soil.ml_confidence}}</div>
    </div>

    <div class="section">
      <div class="label">Soil Image:</div>
      <div class="value">
        <img src="{{soil.soil_image.url}}" alt="Soil Image">
      </div>
    </div>
    <div class="buttons">
      <a href="
      {% url "ongoingProjectSoilUpdate" project.project_id soil.farmer_soil_id %}
      ">
        <button class="edit-btn" onclick="editReport()">Edit</button>
      </a>
      <button class="delete-btn" onclick="deleteReport()">Delete</button>
    </div>
  </div>
  {% endfor %}
  {% endif %}
</div>

<script>


  function deleteReport() {
    if (confirm("Are you sure you want to delete this report?")) {
      alert("Delete functionality goes here.");
    }
  }
</script>


   
{% endblock projectDetailsBody %}
   
{% block javaScript%}

    <script src="{% static 'js/imagePreview.js' %}"></script>
{% endblock javaScript%}