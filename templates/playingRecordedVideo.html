
 {% extends 'base.html' %}

{% load static %}
{% block title %}Recorded Video{% endblock %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'css/recordedVideo.css' %}">
{% endblock head %}

{% block body %}
<div class="container">
    <div class="video-section">
        <div class="video-container">
            <video id="video" class="playing-video" controls>
                <source src="{{ video.video_file.url }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>

            <div class="controls">
                <button class="btn play-btn">‚ñ∂</button>
                <div class="progress">
                    <div class="progress-bar"></div>
                </div>
                <button class="btn fullscreen-btn">‚õ∂</button>
            </div>
        </div>

        <h2>{{ video.title }}</h2>
        <p>{{ video.description }}</p>
        <div class="video-info">
            <p>{{ video.views }} views ‚Ä¢ {{ video.upload_date|date:"F j, Y" }}</p>
            <div class="actions">
                <button onclick="likeVideo()">üëç Like</button>
                <button onclick="shareVideo()">üîó Share</button>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <h3>Recommended</h3>
        {% for rec in recommended_videos %}
        <div class="video-card">
            <a href="{% url 'playingRecordedVideo' rec.video_id %}">
                <img src="{{ rec.thumbnail.url }}" alt="{{ rec.title }}">
                <p>{{ rec.title|truncatechars:50 }}</p>
            </a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block javaScript %}
<script>
    const video = document.getElementById("video");
    const playBtn = document.querySelector(".play-btn");
    const progress = document.querySelector(".progress");
    const progressBar = document.querySelector(".progress-bar");
    const fullscreenBtn = document.querySelector(".fullscreen-btn");

    playBtn.addEventListener("click", () => {
        if (video.paused) {
            video.play();
            playBtn.textContent = "‚è∏";
        } else {
            video.pause();
            playBtn.textContent = "‚ñ∂";
        }
    });

    video.addEventListener("timeupdate", () => {
        const percent = (video.currentTime / video.duration) * 100;
        progressBar.style.width = percent + "%";
    });

    progress.addEventListener("click", (e) => {
        const clickX = e.offsetX;
        const width = progress.offsetWidth;
        video.currentTime = (clickX / width) * video.duration;
    });

    fullscreenBtn.addEventListener("click", () => {
        if (video.requestFullscreen) {
            video.requestFullscreen();
        } else if (video.mozRequestFullScreen) {
            video.mozRequestFullScreen();
        } else if (video.webkitRequestFullscreen) {
            video.webkitRequestFullscreen();
        } else if (video.msRequestFullscreen) {
            video.msRequestFullscreen();
        }
    });

    function likeVideo() {
        alert("Thanks for liking the video!");
    }

    function shareVideo() {
        const url = window.location.href;
        navigator.clipboard.writeText(url).then(() => {
            alert("Video URL copied to clipboard!");
        });
    }
</script>
{% endblock %}
