{% extends 'systemAdminBase.html'%}

{% load static %}
{% block title%}
Crops
{% endblock title%}
  
{% block head %}

<link rel="stylesheet" type="text/css" href="{% static 'css/admin/cropDetailsAddForm.css' %}">
{% endblock head %}

{% block adminBody %}

<div class="form-container">
    <h2>Add Pest Information</h2>
    <form method="POST" action="{% if crop_id %}{% url 'adminAddPest' crop_id %}{% else %}{% url 'adminAddPest' %}{% endif %}" enctype="multipart/form-data">
        {% csrf_token %}
        <label>Select Crop:</label>
        <select name="crop" required>
            <option value="">Select a crop</option>
            {% for crop in crops %}
            <option value="{{ crop.crop_id }}" {% if crop.crop_id == crop_id %}selected{% endif %}>{{ crop.crop_name }}</option>
            {% endfor %}
        </select>

        <label>Pest Name:</label>
        <input type="text" name="pest_name" required>

        <label>Pest Type:</label>
        <input type="text" name="pest_type" required>

        <label>Pest Life Cycle:</label>
        <textarea name="pest_life_cycle" rows="3" required></textarea>

        <label>Symptoms:</label>
        <textarea name="symptoms" rows="3" required></textarea>

        <label>Affected Plant Parts:</label>
        <input type="text" name="affected_plant_parts" required>

        <label>Pest Seasonality:</label>
        <input type="text" name="pest_seasonality" required>

        <label>Pest Damage Level:</label>
        <input type="text" name="pest_damage_level" required>

        <label>Detection Method:</label>
        <textarea name="detection_method" rows="3" required></textarea>

        <label>Control Measures:</label>
        <textarea name="control_measures" rows="3" required></textarea>

        <label>Recommended Pesticides:</label>
        <textarea name="recommended_pesticides" rows="3" required></textarea>

        <label>Resistance Risk:</label>
        <input type="text" name="resistance_risk" required>

        <label>Environmental Effect:</label>
        <textarea name="environment_effect" rows="3" required></textarea>

        <label>Friendly Tips:</label>
        <textarea name="friendly_tips" rows="3" required></textarea>

        <label>Equipments:</label>
        <input type="text" name="equipments" required>

        <label>Pest Image:</label>
        <input type="file" name="pest_image" accept="image/*" onchange="previewImage(event)" required>
        <img id="preview" style="display:none; max-width:100%; margin-top:10px;" />

        <label>Description:</label>
        <textarea name="description" rows="4" required></textarea>

        <button type="submit">Submit</button>
    </form>
</div>

{% endblock adminBody %}
{% block javaScript%}
<script src="{% static 'js/admin/formImagePreview.js' %}"></script>
{% endblock javaScript%}
    

